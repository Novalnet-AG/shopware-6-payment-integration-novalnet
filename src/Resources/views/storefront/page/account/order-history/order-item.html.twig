{% sw_extends '@Storefront/storefront/page/account/order-history/order-item.html.twig' %}


{% block page_account_order_item_order_table_body_cell_payment_method %}
	{% set paymentMethod = '' %}
	{% for transaction in order.transactions|sort((a, b) => a.createdAt <=> b.createdAt) %}
		{% set paymentMethod = transaction.paymentMethod.customFields.novalnet_payment_method_name ?? transaction.paymentMethod.handlerIdentifier|split('\\')|last|lower %}
	{% endfor %}
	<div class="col-12 col-sm order-table-header-order-table-body-cell">
        <strong class="order-table-header-label">
            {{ "account.orderPaymentMethod"|trans|sw_sanitize }}{{ "account.colonCharacter"|trans|sw_sanitize }}
        </strong>
        <span class="order-table-body-value">
            {% if paymentMethod == 'novalnetinvoiceguarantee' %}
                {{"NovalnetPayment.text.invoiceLabel"|trans}}
            {% elseif paymentMethod == 'novalnetsepaguarantee' %}
                {{"NovalnetPayment.text.sepaLabel"|trans}}
            {% else %}
                {{ order.transactions|last.paymentMethod.translated.name }}
            {% endif %}
        </span>
    </div>
{% endblock %}
