(()=>{"use strict";var e={156:e=>{var t=function(e){var t;return!!e&&"object"==typeof e&&"[object RegExp]"!==(t=Object.prototype.toString.call(e))&&"[object Date]"!==t&&e.$$typeof!==n},n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function a(e,t){return!1!==t.clone&&t.isMergeableObject(e)?i(Array.isArray(e)?[]:{},e,t):e}function o(e,t,n){return e.concat(t).map(function(e){return a(e,n)})}function r(e){return Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[])}function l(e,t){try{return t in e}catch(e){return!1}}function i(e,n,s){(s=s||{}).arrayMerge=s.arrayMerge||o,s.isMergeableObject=s.isMergeableObject||t,s.cloneUnlessOtherwiseSpecified=a;var d,u,c=Array.isArray(n);return c!==Array.isArray(e)?a(n,s):c?s.arrayMerge(e,n,s):(u={},(d=s).isMergeableObject(e)&&r(e).forEach(function(t){u[t]=a(e[t],d)}),r(n).forEach(function(t){(!l(e,t)||Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))&&(l(e,t)&&d.isMergeableObject(n[t])?u[t]=(function(e,t){if(!t.customMerge)return i;var n=t.customMerge(e);return"function"==typeof n?n:i})(t,d)(e[t],n[t],d):u[t]=a(n[t],d))}),u)}i.all=function(e,t){if(!Array.isArray(e))throw Error("first argument should be an array");return e.reduce(function(e,n){return i(e,n,t)},{})},e.exports=i}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var a=n(156),o=n.n(a);class r{static ucFirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}static lcFirst(e){return e.charAt(0).toLowerCase()+e.slice(1)}static toDashCase(e){return e.replace(/([A-Z])/g,"-$1").replace(/^-/,"").toLowerCase()}static toLowerCamelCase(e,t){let n=r.toUpperCamelCase(e,t);return r.lcFirst(n)}static toUpperCamelCase(e,t){return t?e.split(t).map(e=>r.ucFirst(e.toLowerCase())).join(""):r.ucFirst(e.toLowerCase())}static parsePrimitive(e){try{return/^\d+(.|,)\d+$/.test(e)&&(e=e.replace(",",".")),JSON.parse(e)}catch(t){return e.toString()}}}class l{constructor(e=document){this._el=e,e.$emitter=this,this._listeners=[]}publish(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=new CustomEvent(e,{detail:t,cancelable:n});return this.el.dispatchEvent(a),a}subscribe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this,o=e.split("."),r=n.scope?t.bind(n.scope):t;if(n.once&&!0===n.once){let t=r;r=function(n){a.unsubscribe(e),t(n)}}return this.el.addEventListener(o[0],r),this.listeners.push({splitEventName:o,opts:n,cb:r}),!0}unsubscribe(e){let t=e.split(".");return this.listeners=this.listeners.reduce((e,n)=>([...n.splitEventName].sort().toString()===t.sort().toString()?this.el.removeEventListener(n.splitEventName[0],n.cb):e.push(n),e),[]),!0}reset(){return this.listeners.forEach(e=>{this.el.removeEventListener(e.splitEventName[0],e.cb)}),this.listeners=[],!0}get el(){return this._el}set el(e){this._el=e}get listeners(){return this._listeners}set listeners(e){this._listeners=e}}class i{constructor(e,t={},n=!1){if(!(e instanceof Node)){console.warn(`There is no valid element given while trying to create a plugin instance for "${n}".`);return}this.el=e,this.$emitter=new l(this.el),this._pluginName=this._getPluginName(n),this.options=this._mergeOptions(t),this._initialized=!1,this._registerInstance(),this._init()}init(){console.warn(`The "init" method for the plugin "${this._pluginName}" is not defined. The plugin will not be initialized.`)}update(){}_init(){this._initialized||(this.init(),this._initialized=!0)}_update(){this._initialized&&this.update()}_mergeOptions(e){let t=[this.constructor.options,this.options,e];return t.push(this._getConfigFromDataAttribute()),t.push(this._getOptionsFromDataAttribute()),o().all(t.filter(e=>e instanceof Object&&!(e instanceof Array)).map(e=>e||{}))}_getConfigFromDataAttribute(){let e={};if("function"!=typeof this.el.getAttribute)return e;let t=r.toDashCase(this._pluginName),n=this.el.getAttribute(`data-${t}-config`);return n?window.PluginConfigManager.get(this._pluginName,n):e}_getOptionsFromDataAttribute(){let e={};if("function"!=typeof this.el.getAttribute)return e;let t=r.toDashCase(this._pluginName),n=this.el.getAttribute(`data-${t}-options`);if(n)try{return JSON.parse(n)}catch(e){console.error(`The data attribute "data-${t}-options" could not be parsed to json: ${e.message}`)}return e}_registerInstance(){window.PluginManager.getPluginInstancesFromElement(this.el).set(this._pluginName,this),window.PluginManager.getPlugin(this._pluginName,!1).get("instances").push(this)}_getPluginName(e){return e||(e=this.constructor.name),e}}class s{constructor(){this._request=null,this._errorHandlingInternal=!1}get(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",a=this._createPreparedRequest("GET",e,n);return this._sendRequest(a,null,t)}post(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";a=this._getContentType(t,a);let o=this._createPreparedRequest("POST",e,a);return this._sendRequest(o,t,n)}delete(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";a=this._getContentType(t,a);let o=this._createPreparedRequest("DELETE",e,a);return this._sendRequest(o,t,n)}patch(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";a=this._getContentType(t,a);let o=this._createPreparedRequest("PATCH",e,a);return this._sendRequest(o,t,n)}abort(){if(this._request)return this._request.abort()}setErrorHandlingInternal(e){this._errorHandlingInternal=e}_registerOnLoaded(e,t){t&&(!0===this._errorHandlingInternal?(e.addEventListener("load",()=>{t(e.responseText,e)}),e.addEventListener("abort",()=>{console.warn(`the request to ${e.responseURL} was aborted`)}),e.addEventListener("error",()=>{console.warn(`the request to ${e.responseURL} failed with status ${e.status}`)}),e.addEventListener("timeout",()=>{console.warn(`the request to ${e.responseURL} timed out`)})):e.addEventListener("loadend",()=>{t(e.responseText,e)}))}_sendRequest(e,t,n){return this._registerOnLoaded(e,n),e.send(t),e}_getContentType(e,t){return e instanceof FormData&&(t=!1),t}_createPreparedRequest(e,t,n){return this._request=new XMLHttpRequest,this._request.open(e,t),this._request.setRequestHeader("X-Requested-With","XMLHttpRequest"),n&&this._request.setRequestHeader("Content-type",n),this._request}}let d="loader",u={BEFORE:"before",INNER:"inner"};class c{constructor(e,t=u.BEFORE){this.parent=e instanceof Element?e:document.body.querySelector(e),this.position=t}create(){if(!this.exists()){if(this.position===u.INNER){this._previousHTML=this.parent.innerHTML,this.parent.innerHTML=c.getTemplate();return}this.parent.insertAdjacentHTML(this._getPosition(),c.getTemplate())}}remove(){if(this.position===u.INNER){this.parent.innerHTML=this._previousHTML;return}this.parent.querySelectorAll(`.${d}`).forEach(e=>e.remove())}exists(){return this.parent.querySelectorAll(`.${d}`).length>0}_getPosition(){return this.position===u.BEFORE?"afterbegin":"beforeend"}static getTemplate(){return`<div class="${d}" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>`}static SELECTOR_CLASS(){return d}}class m extends c{constructor(e,t="before"){super(e,t),this._isValidElement()||console.warn(`[ButtonLoadingIndicatorUtil] Parent element is not of type <button> or <a>. Given element: ${this.parent}`)}create(){if(!this._isValidElement()){console.warn(`[ButtonLoadingIndicatorUtil] Unable to create loading indicator. Parent element is not of type <button> or <a>. Given element: ${this.parent}`);return}if("inner"===this.position){let e=this.parent.getBoundingClientRect().width;this.parent.style.width=`${e}px`}super.create(),this.parent.classList.add(`is-loading-indicator-${this.position}`),this._isButtonElement()?this.parent.disabled=!0:this._isAnchorElement()&&this.parent.classList.add("disabled")}remove(){if(!this.exists()){console.warn(`[ButtonLoadingIndicatorUtil] Unable to remove loading indicator. No indicator present on given element: ${this.parent}`);return}"inner"===this.position&&(this.parent.style.width="auto"),super.remove(),this.parent.classList.remove(`is-loading-indicator-${this.position}`),this._isButtonElement()?this.parent.disabled=!1:this._isAnchorElement()&&this.parent.classList.remove("disabled")}_isValidElement(){return this._isButtonElement()||this._isAnchorElement()}_isButtonElement(){return this.parent?.tagName.toLowerCase()==="button"}_isAnchorElement(){return this.parent?.tagName.toLowerCase()==="a"}}class p{static isNode(e){return"object"==typeof e&&null!==e&&(e===document||e===window||e instanceof Node)}static hasAttribute(e,t){if(!p.isNode(e))throw Error("The element must be a valid HTML Node!");return"function"==typeof e.hasAttribute&&e.hasAttribute(t)}static getAttribute(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(n&&!1===p.hasAttribute(e,t))throw Error(`The required property "${t}" does not exist!`);if("function"!=typeof e.getAttribute){if(n)throw Error("This node doesn't support the getAttribute function!");return}return e.getAttribute(t)}static getDataAttribute(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=t.replace(/^data(|-)/,""),o=r.toLowerCamelCase(a,"-");if(!p.isNode(e)){if(n)throw Error("The passed node is not a valid HTML Node!");return}if(void 0===e.dataset){if(n)throw Error("This node doesn't support the dataset attribute!");return}let l=e.dataset[o];if(void 0===l){if(n)throw Error(`The required data attribute "${t}" does not exist on ${e}!`);return l}return r.parsePrimitive(l)}static querySelector(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(n&&!p.isNode(e))throw Error("The parent node is not a valid HTML Node!");let a=e.querySelector(t)||!1;if(n&&!1===a)throw Error(`The required element "${t}" does not exist in parent node!`);return a}static querySelectorAll(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(n&&!p.isNode(e))throw Error("The parent node is not a valid HTML Node!");let a=e.querySelectorAll(t);if(0===a.length&&(a=!1),n&&!1===a)throw Error(`At least one item of "${t}" must exist in parent node!`);return a}static getFocusableElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,t=`
            input:not([tabindex^="-"]):not([disabled]):not([type="hidden"]),
            select:not([tabindex^="-"]):not([disabled]),
            textarea:not([tabindex^="-"]):not([disabled]),
            button:not([tabindex^="-"]):not([disabled]),
            a[href]:not([tabindex^="-"]):not([disabled]),
            [tabindex]:not([tabindex^="-"]):not([disabled])
        `;return e.querySelectorAll(t)}static getFirstFocusableElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return this.getFocusableElements(e)[0]}static getLastFocusableElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=this.getFocusableElements(e);return t[t.length-1]}}let v=window.PluginManager;v.register("NovalnetPayment",class extends i{init(){this.client=new s;let e=document.querySelectorAll(".novalnet-payment-name"),t=["novalnetsepa","novalnetsepaguarantee","novalnetsepainstalment"],n=["novalnetinvoiceguarantee","novalnetinvoiceinstalment"];this._createScript(()=>{e.forEach(e=>{let a=document.querySelector("input[name=paymentMethodId]:checked"),o=document.querySelector("#"+e.value+"Id"),r=document.querySelector('input[type="radio"].'+e.value+"-SavedPaymentMethods-tokenInput:checked"),l=document.querySelectorAll('input[type="radio"].'+e.value+"-SavedPaymentMethods-tokenInput"),i=document.querySelectorAll('input[name="paymentMethodId"]'),s=document.querySelector('#confirmOrderForm button[type="submit"]'),d=document.querySelector('#novalnetchangePaymentForm button[type="submit"]');if(null!=a&&void 0!==o&&a.value===o.value&&(void 0!=document.getElementById(e.value+"-payment")&&null!=document.getElementById(e.value+"-payment")&&(document.getElementById(e.value+"-payment").style.display="block"),void 0!=document.getElementById(e.value+"ZeroAmountNotify")&&null!=document.getElementById(e.value+"ZeroAmountNotify")&&(document.getElementById(e.value+"ZeroAmountNotify").style.display="block")),null!=r&&this.showComponents(r,e.value),"novalnetcreditcard"==e.value){let t=JSON.parse(document.getElementById(e.value+"-payment").getAttribute("data-"+e.value+"-payment-config"));this.loadIframe(t,e.value),void 0!==document.getElementById("novalnetcreditcard-payment-new")&&null!==document.getElementById("novalnetcreditcard-payment-new")?document.getElementById("novalnetcreditcard-payment-new").addEventListener("click",()=>{NovalnetUtility.setCreditCardFormHeight()}):null!=a&&void 0!==o&&a.value===o.value&&NovalnetUtility.setCreditCardFormHeight()}else if(t.includes(e.value)||n.includes(e.value)){let t=JSON.parse(document.getElementById(e.value+"-payment").getAttribute("data-"+e.value+"-payment-config")),n=document.getElementById(e.value+"AccountHolder"),a=document.getElementById(e.value+"AccountData"),o=document.getElementById(e.value+"AccountBic"),r=document.getElementById(e.value+"Mandate");"novalnetsepa"==e.value||null===document.getElementById(e.value+"DobField")||null!==t.company&&NovalnetUtility.isValidCompanyName(t.company)||(document.getElementById(e.value+"DobField").style.display="block"),null!=a&&(a.onpaste=e=>e.preventDefault(),["click","keydown","keyup"].forEach(e=>{a.addEventListener(e,e=>{var t=e.target.value;void 0!=t&&null!=t&&((t=t.toUpperCase()).match(/(?:CH|MC|SM|GB|GI)/)?document.querySelector(".nn-bic-field").classList.remove("nnhide"):document.querySelector(".nn-bic-field").classList.add("nnhide"))})})),null!=n&&(n.onpaste=e=>e.preventDefault(),this.handleInputKeyPress(document.getElementById(e.value+"AccountHolder"))),null!=r&&r.addEventListener("click",()=>{void 0!=document.getElementById(e.value+"AboutMandate")&&!0==document.getElementById(e.value+"AboutMandate").classList.contains("nnhide")?document.getElementById(e.value+"AboutMandate").classList.remove("nnhide"):document.getElementById(e.value+"AboutMandate").classList.add("nnhide")}),null!=o&&(o.onpaste=e=>e.preventDefault())}else if("novalnetmbway"==e.value){if("function"==typeof window.intlTelInput){let e=document.getElementById("novalnetmbwayMobileNo"),t=document.getElementById("novalnetmbwayMobileDialcode"),n=window.intlTelInput(e,{preferredCountries:["pt"],separateDialCode:!0,autoPlaceholder:"off",placeholderNumberType:"MOBILE",showFlags:!0,autoInsertDialCode:!0,formatOnDisplay:!1});t.value=n.getSelectedCountryData().dialCode;let a="";e.addEventListener("countrychange",e=>{void 0!=(a=n.getSelectedCountryData().dialCode)&&(t.value=a)})}}else"novalnetdirectdebitach"==e.value&&(document.getElementById("novalnetdirectdebitachAccountHolder").onpaste=e=>e.preventDefault(),this.handleInputKeyPress(document.getElementById("novalnetdirectdebitachAccountHolder")));let u=document.querySelectorAll(".remove_cc_card_details"),c=document.querySelectorAll(".remove_card_details"),m=document.querySelectorAll(".remove_ach_card_details"),p=document.querySelectorAll(".remove_guarantee_card_details "),v=document.querySelectorAll(".remove_instalment_card_details");"novalnetcreditcard"===e.value?u.forEach(t=>{t.addEventListener("click",()=>{this.removeStoredCard(t,e.value)})}):"novalnetsepa"===e.value?c.forEach(t=>{t.addEventListener("click",()=>{this.removeStoredCard(t,e.value)})}):"novalnetsepaguarantee"===e.value?p.forEach(t=>{t.addEventListener("click",()=>{this.removeStoredCard(t,e.value)})}):"novalnetsepainstalment"===e.value?v.forEach(t=>{t.addEventListener("click",()=>{this.removeStoredCard(t,e.value)})}):"novalnetdirectdebitach"===e.value&&m.forEach(t=>{t.addEventListener("click",()=>{this.removeStoredCard(t,e.value)})}),("novalnetinvoiceinstalment"===e.value||"novalnetsepainstalment"===e.value)&&(void 0!=document.getElementById(e.value+"Duration")&&(document.getElementById(e.value+"Duration").selectedIndex=0,document.getElementById(e.value+"Duration").addEventListener("change",t=>{let n=t.target.value;document.querySelectorAll("."+e.value+"Detail").forEach(function(e){e.dataset.duration===n?e.hidden=!1:e.hidden="hidden"})})),void 0!=document.getElementById(e.value+"Info")&&document.getElementById(e.value+"Info").addEventListener("click",t=>{this.hideSummary(e.value)})),null!=l&&l.forEach((t,n)=>{t.addEventListener("click",()=>{this.showComponents(t,e.value)})}),null!=d&&(null===a&&(d.disabled=!0),null!=i&&i.forEach(t=>{t.addEventListener("click",()=>{this.showPaymentForm(t,e.value),d.disabled=!1})}),d.addEventListener("click",t=>{("novalnetcreditcard"==e.value||"novalnetsepa"==e.value||"novalnetdirectdebitach"==e.value)&&this.validatePaymentForm(e.value,d,"changePayment",t)})),null!=s&&s.addEventListener("click",a=>{("novalnetcreditcard"==e.value||t.includes(e.value)||n.includes(e.value)||"novalnetmbway"==e.value||"novalnetdirectdebitach"==e.value)&&this.validatePaymentForm(e.value,s,"checkout",a)})})})}_createScript(e){let t=document.createElement("script");t.type="text/javascript",t.src="https://cdn.novalnet.de/js/v2/NovalnetUtility.js",t.addEventListener("load",e.bind(this),!1),document.head.appendChild(t)}loadIframe(e,t){if("novalnetcreditcard"===t){var n=this;if(NovalnetUtility.setClientKey(e.clientKey),void 0!=document.querySelector("#novalnetchangePaymentForm"))var a=document.querySelector("#novalnetchangePaymentForm");else var a=document.querySelector("#confirmOrderForm");var o={callback:{on_success:function(e){if(document.getElementById("novalnetcreditcard-panhash").value=e.hash,document.getElementById("novalnetcreditcard-uniqueid").value=e.unique_id,document.getElementById("novalnetcreditcard-doRedirect").value=e.do_redirect,void 0!=e.card_exp_month&&void 0!=e.card_exp_year&&(document.getElementById("novalnetcreditcard-expiry-date").value=e.card_exp_month+"/"+e.card_exp_year),document.getElementById("novalnetcreditcard-masked-card-no").value=e.card_number,document.getElementById("novalnetcreditcard-card-type").value=e.card_type,void 0==document.querySelector('#novalnetchangePaymentForm button[type="submit"]'))return a.submit(),!0;{let t=new s;n._disableSubmitButton(document.querySelector('#novalnetchangePaymentForm button[type="submit"]')),t.post(document.getElementById("storeCustomerDataUrl").value,JSON.stringify({pan_hash:e.hash,unique_id:e.unique_id,doRedirect:e.do_redirect,paymentName:"creditcard",parentOrderNumber:document.getElementById("parentOrderNumber").value,aboId:document.getElementById("aboId").value,paymentMethodId:document.getElementById("novalnetcreditcardId").value}),e=>{let t=JSON.parse(e);if(!0==t.success&&void 0!=t.redirect_url)window.location.replace(t.redirect_url);else if(!0==t.success)return a.submit(),!0;else return n.preventForm("novalnetcreditcard",t.message),n._removeButtonLoader(document.querySelector('#novalnetchangePaymentForm button[type="submit"]')),!1})}},on_error:function(e){if(void 0!==e.error_message&&""!==e.error_message){if(void 0!=document.getElementById("confirmFormSubmit"))var t=document.getElementById("confirmFormSubmit");else if(void 0!=document.querySelector('#novalnetchangePaymentForm button[type="submit"]'))var t=document.querySelector('#novalnetchangePaymentForm button[type="submit"]');else var t=document.querySelector('#confirmOrderForm button[type="submit"]');n.preventForm("novalnetcreditcard",e.error_message),n._removeButtonLoader(t)}return!1},on_show_overlay:function(e){document.getElementById("novalnetCreditcardIframe").classList.add("novalnet-challenge-window-overlay")},on_hide_overlay:function(e){document.getElementById("novalnetCreditcardIframe").classList.remove("novalnet-challenge-window-overlay")},on_show_captcha:function(){return elementContent.innerHTML="Your Credit Card details are Invalid",element.style.display="block",element.scrollIntoView(),elementContent.focus(),!1}},iframe:e.iframe,customer:e.customer,transaction:e.transaction,custom:e.custom};NovalnetUtility.createCreditCardForm(o)}}handleInputKeyPress(e){let t=/[^0-9\[\]\/\\#,+@!^()$~%'"=:;<>{}\_\|*?`]/;e.addEventListener("keypress",e=>{let n=String.fromCharCode(e.keyCode||e.which);if(!t.test(n))return e.preventDefault(),!1})}showPaymentForm(e,t){let n=document.querySelector("#"+t+"Id");void 0!==n&&""!==n.value&&e.value===n.value?("novalnetcreditcard"==t&&NovalnetUtility.setCreditCardFormHeight(),void 0!==document.getElementById(t+"-payment")&&null!==document.getElementById(t+"-payment")&&(document.getElementById(t+"-payment").style.display="block")):void 0!==document.getElementById(t+"-payment")&&null!==document.getElementById(t+"-payment")&&(document.getElementById(t+"-payment").style.display="none")}showComponents(e,t){"new"===e.value&&!0===e.checked?document.getElementById(t+"-payment-form").classList.remove("nnhide"):document.getElementById(t+"-payment-form").classList.add("nnhide")}hideSummary(e){let t=document.getElementById(e+"Summary");t.classList.contains("nnhide")?t.classList.remove("nnhide"):t.classList.add("nnhide")}removeStoredCard(e,t){var n=document.querySelector('input[name="'+t+'FormData[paymentToken]"]:checked');void 0!=n&&""!=n&&(this.client.post(document.getElementById("cardRemoveUrl").value,JSON.stringify({token:n.value}),""),setTimeout(()=>window.location.reload(),2e3))}_disableSubmitButton(e){e.setAttribute("disabled","disabled"),new m(e).create()}_removeButtonLoader(e){return e.removeAttribute("disabled"),new m(e).remove(),!1}validateAge(e){var t=new Date;if(void 0===e||""===e)return NaN;var n=e.split("."),a=t.getFullYear()-n[2],o=t.getMonth()-n[1];return(o+=1,void 0!==n[2]&&4!==n[2].length)?NaN:((o<0||"0"==o&&t.getDate()<n[0])&&a--,a)}preventForm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";n&&(n.preventDefault(),n.stopImmediatePropagation());var o=document.getElementById(e+"-error-container"),r=o.querySelector(".alert-content");return r.innerHTML="",void 0!==t&&""!==t?(r.innerHTML=t,o.classList.remove("nnhide")):o.classList.add("nnhide"),a&&(a.style.borderColor="red"),o.scrollIntoView(),!1}sendChangePaymentRequest(e,t,n,a){a.preventDefault(),a.stopImmediatePropagation(),t.parentOrderNumber=document.getElementById("parentOrderNumber").value,t.aboId=document.getElementById("aboId").value,this.client.post(document.getElementById("storeCustomerDataUrl").value,JSON.stringify(t),t=>{let o=JSON.parse(t);!0==o.success?document.querySelector("#novalnetchangePaymentForm").submit():(this.preventForm(e,o.message,a),this._removeButtonLoader(n))})}validatePaymentForm(e,t,n,a){let o=document.querySelector("#"+e+"Id"),r=document.querySelector("input[name=paymentMethodId]:checked"),l=document.querySelector('input[type="radio"].'+e+"-SavedPaymentMethods-tokenInput:checked");if(["novalnetcreditcard","novalnetdirectdebitach","novalnetsepa","novalnetsepaguarantee","novalnetsepainstalment","novalnetmbway"].includes(e)){if(void 0!==o&&""!==o.value&&r.value===o.value){if("novalnetcreditcard"==e){if(null==l||"new"==l.value){var i=document.querySelector("#tos");if(void 0!=i&&!i.checked)return!1;this._disableSubmitButton(t),a.preventDefault(),a.stopImmediatePropagation(),o.scrollIntoView(),NovalnetUtility.getPanHash()}else"changePayment"==n&&null!=l&&"new"!=l.value&&this.sendChangePaymentRequest(e,{token:l.value,paymentName:"creditcard",paymentMethodId:document.getElementById("novalnetcreditcardId").value},t,a)}else if(["novalnetsepa","novalnetsepaguarantee","novalnetsepainstalment"].includes(e)){let o=document.getElementById(e+"AccountData"),r=document.getElementById(e+"AccountHolder"),i=document.getElementById(e+"AccountBic"),d=document.getElementById(e+"Dob"),u=JSON.parse(document.getElementById(e+"-payment").getAttribute("data-"+e+"-payment-config"));if((null==l||"new"==l.value)&&(void 0===r||void 0!==r&&""===r.value))this.preventForm(e,u.text.invalidIban,a,r);else if((null==l||"new"==l.value)&&(void 0===o||void 0!==o&&""===o.value))this.preventForm(e,u.text.invalidIban,a,o);else if((null==l||"new"==l.value)&&(void 0===i||void 0!==i&&""===i.value)&&!1==document.querySelector(".nn-bic-field").classList.contains("nnhide"))this.preventForm(e,u.text.invalidIban,a,i);else if("novalnetsepainstalment"!==e&&"novalnetsepaguarantee"!==e||null!==u.company&&NovalnetUtility.isValidCompanyName(u.company)&&0!==u.allowB2B){if("changePayment"==n&&"novalnetsepa"==e){if(null==l||"new"==l.value){var s={iban:o.value,paymentName:"direct_debit_sepa",paymentMethodId:document.getElementById("novalnetsepaId").value};void 0!=i&&""!=i.value&&s.push({bic:i.value})}else var s={token:l.value,paymentName:"direct_debit_sepa",paymentMethodId:document.getElementById("novalnetsepaId").value};this.sendChangePaymentRequest(e,s,t,a)}}else if(void 0===d||""===d.value){if(void 0!==document.getElementById("novalnetsepaId")&&void 0!=u.forceGuarantee&&1==u.forceGuarantee&&"novalnetsepaguarantee"===e)return document.getElementById("doForceSepaPayment").value=1,document.getElementById("SepaForcePayment").value=1,!0;this.preventForm(e,u.text.dobEmpty,a,d)}else if(void 0!==d&&""!==d.value){let t=this.validateAge(d.value);if((t<18||isNaN(t))&&void 0!==document.getElementById("novalnetsepaId")&&void 0!=u.forceGuarantee&&1==u.forceGuarantee&&"novalnetsepaguarantee"===e)return document.getElementById("doForceSepaPayment").value=1,document.getElementById("SepaForcePayment").value=1,!0;(t<18||isNaN(t))&&this.preventForm(e,u.text.dobInvalid,a,d)}}else if("novalnetdirectdebitach"==e){let o=document.querySelector("input[id ="+e+"AccountHolder"),r=document.getElementById(e+"AccountNo"),i=document.getElementById(e+"RoutingAbaNo"),d=JSON.parse(document.getElementById(e+"-payment").getAttribute("data-"+e+"-payment-config"));if(null==l||"new"==l.value){if(void 0===o||""===o.value)return this.preventForm(e,d.text.accountHolderEmpty,a,o),!1;if(void 0===r||""===r.value)return this.preventForm(e,d.text.accountNumberEmpty,a,r),!1;if(void 0===i||""===i.value)return this.preventForm(e,d.text.routingNumberEmpty,a,i),!1}if("changePayment"==n&&"novalnetdirectdebitach"==e){if(null==l||"new"==l.value)var s={paymentName:"direct_debit_ach",paymentMethodId:document.getElementById("novalnetdirectdebitachId").value,account_holder:o.value,account_number:r.value,routing_number:i.value};else var s={paymentName:"direct_debit_ach",paymentMethodId:document.getElementById("novalnetdirectdebitachId").value,token:l.value};this.sendChangePaymentRequest(e,s,t,a)}}else if("novalnetmbway"==e){let t=document.getElementById(e+"MobileNo"),n=JSON.parse(document.getElementById(e+"-payment").getAttribute("data-"+e+"-payment-config"));(void 0===t||""===t.value)&&this.preventForm(e,n.text.mobileEmpty,a,t)}}}else if(["novalnetinvoiceguarantee","novalnetinvoiceinstalment"].includes(e)&&void 0!==o&&""!==o.value&&r.value===o.value){let t=document.getElementById(e+"Dob"),n=JSON.parse(document.getElementById(e+"-payment").getAttribute("data-"+e+"-payment-config"));if(null===n.company||!NovalnetUtility.isValidCompanyName(n.company)||0===n.allowB2B){if(void 0===t||""===t.value){if(void 0!==document.getElementById("novalnetinvoiceId")&&void 0!=n.forceGuarantee&&1==n.forceGuarantee&&"novalnetinvoiceguarantee"===e)return document.getElementById("doForceInvoicePayment").value=1,document.getElementById("InvoiceForcePayment").value=1,!0;this.preventForm(e,n.text.dobEmpty,a,t)}else if(void 0!==t&&""!==t.value){let o=this.validateAge(t.value);if((o<18||isNaN(o))&&void 0!==document.getElementById("novalnetinvoiceId")&&void 0!=n.forceGuarantee&&1==n.forceGuarantee&&"novalnetinvoiceguarantee"===e)return document.getElementById("doForceInvoicePayment").value=1,document.getElementById("InvoiceForcePayment").value=1,!0;(o<18||isNaN(o))&&this.preventForm(e,n.text.dobInvalid,a,t)}}}}},"#novalnet-payment-script"),v.register("NovalnetWalletPayment",class extends i{init(){new s,this._createScript(()=>{try{this._loadWalletPaymentForm()}catch(e){console.log(e.message)}});let e=document.querySelector("input[name=paymentMethodId]:checked"),t=document.querySelectorAll('input[name="paymentMethodId"]'),n=document.querySelector("#novalnetgooglepayId"),a=document.querySelector("#novalnetapplepayId");null!=e&&null!=n&&n.value===e.value&&this.showButton("novalnetgooglepay",!0),null!=e&&null!=a&&a.value===e.value&&this.showButton("novalnetapplepay",!0),null!=t&&t.forEach(e=>{e.addEventListener("click",()=>{let e=document.querySelector("input[name=paymentMethodId]:checked");null!=e&&null!=n&&n.value===e.value?(this.showButton("novalnetapplepay",!1),this.showButton("novalnetgooglepay",!0)):null!=e&&null!=a&&a.value===e.value?(this.showButton("novalnetgooglepay",!1),this.showButton("novalnetapplepay",!0)):(this.showButton("novalnetgooglepay",!1),this.showButton("novalnetapplepay",!1))})})}showButton(e,t){if(t)var n="inline-block",a="none",o="line-height: 2.5rem; margin-top: -25px;";else var n="none",a="inline",o="line-height: 2.125rem; margin-top: 0px;";void 0!=document.getElementById(e+"-payment")&&null!=document.getElementById(e+"-payment")&&(document.getElementById(e+"-payment").style.display=n),void 0!=document.querySelector('#novalnetchangePaymentForm button[class="btn btn-outline-secondary"]')&&null!=document.querySelector('#novalnetchangePaymentForm button[class="btn btn-outline-secondary"]')&&(document.querySelector('#novalnetchangePaymentForm button[class="btn btn-outline-secondary"]').style.cssText=o),void 0!=document.querySelector('#novalnetchangePaymentForm button[class="btn btn-primary"]')&&null!=document.querySelector('#novalnetchangePaymentForm button[class="btn btn-primary"]')&&(document.querySelector('#novalnetchangePaymentForm button[class="btn btn-primary"]').style.display=a),void 0!=document.getElementById(e+"ZeroAmountNotify")&&null!=document.getElementById(e+"ZeroAmountNotify")&&(document.getElementById(e+"ZeroAmountNotify").style.display=n)}_createScript(e){let t=document.createElement("script");t.type="text/javascript",t.src="https://cdn.novalnet.de/js/v3/payment.js",t.addEventListener("load",e.bind(this),!1),document.head.appendChild(t)}_loadWalletPaymentForm(){var e=NovalnetPayment().createPaymentObject(),t=this.el,n=p.getDataAttribute(this.el,"data-payment-config",!1),a=new s;if(void 0!=t&&("nn-apple-pay-button"==t.className||t.className.indexOf("nn-apple-pay-button")>=0))var o="novalnetapplepay";else var o="novalnetgooglepay";var r={clientKey:n.clientKey,paymentIntent:{merchant:n.merchant,transaction:n.transaction,order:n.order,custom:n.custom,button:n.button,callbacks:{onProcessCompletion:function(e,n){if(e.result&&e.result.status){if("SUCCESS"==e.result.status){if("checkoutPage"==p.getDataAttribute(t,"data-page-type")){var r=p.querySelector(document,"#confirmOrderForm");if(void 0!=t&&"nn-apple-pay-button"==t.className)n({status:"SUCCESS",statusText:""}),document.getElementById("novalnetapplepay-wallet-token").value=e.transaction.token,r.submit();else if(document.getElementById("novalnetgooglepay-wallet-token").value=e.transaction.token,document.getElementById("novalnetgooglepay-do-redirect").value=e.transaction.doRedirect,e.transaction.doRedirect&&!1!=e.transaction.doRedirect){let r=p.getAttribute(t,"data-success-url"),l=p.getAttribute(t,"data-paymentMethodId"),i=p.getAttribute(t,"data-orderId"),s={serverResponse:e,paymentMethodId:l,paymentName:o,orderId:i};a.post(r,JSON.stringify(s),e=>{let t=JSON.parse(e);!0==t.success?(n({status:"SUCCESS",statusText:""}),window.location.replace(t.url)):!1==t.success?n({status:"FAILURE",statusText:t.message}):window.location.reload()})}else n({status:"SUCCESS",statusText:""}),r.submit();return!0}if("changePayment"==p.getDataAttribute(t,"data-page-type")){var r=document.querySelector("#novalnetchangePaymentForm");if(void 0!=t&&"nn-apple-pay-button"==t.className)var l={wallet_token:e.transaction.token,paymentName:"applepay",parentOrderNumber:document.getElementById("parentOrderNumber").value,aboId:document.getElementById("aboId").value,paymentMethodId:document.getElementById("novalnetapplepayId").value};else var l={wallet_token:e.transaction.token,doRedirect:e.transaction.doRedirect,paymentName:"googlepay",parentOrderNumber:document.getElementById("parentOrderNumber").value,aboId:document.getElementById("aboId").value,paymentMethodId:document.getElementById("novalnetgooglepayId").value};a.post(document.getElementById("storeCustomerDataUrl").value,JSON.stringify(l),e=>{let t=JSON.parse(e);!0==t.success&&void 0!=t.redirect_url?window.location.replace(t.redirect_url):!0==t.success?r.submit():n({status:"FAILURE",statusText:t.message})})}else{let r=p.getAttribute(t,"data-success-url"),l={serverResponse:e,paymentMethodId:p.getAttribute(t,"data-paymentMethodId"),paymentName:o};a.post(r,JSON.stringify(l),e=>{let t=JSON.parse(e);!0==t.success?(n({status:"SUCCESS",statusText:""}),window.location.replace(t.url)):!1==t.success?n({status:"FAILURE",statusText:t.message}):window.location.reload()})}}else n({status:"FAILURE",statusText:e.result.status_text}),e.result.status_text&&alert(e.result.status_text)}},onShippingContactChange:function(e,n){let o=p.getDataAttribute(t,"data-shipping-url"),r={shippingInfo:e,paymentMethodId:p.getAttribute(t,"data-paymentMethodId")};return new Promise((e,t)=>{a.post(o,JSON.stringify(r),(n,a)=>{a.status>=400&&t(n);try{n=JSON.parse(n),e(n)}catch(e){t(e)}})}).then(function(e){e.shipping.length?n({amount:e.totalPrice,lineItems:e.lineItem,methods:e.shipping,defaultIdentifier:e.shipping[0].identifier}):n({methodsNotFound:"No Shipping Contact Available, please enter a valid contact"})})},onShippingMethodChange:function(e,n){let o=p.getAttribute(t,"data-shippingUpdate-url"),r={shippingMethod:e};return new Promise((e,t)=>{a.post(o,JSON.stringify(r),(a,o)=>{o.status>=400&&(t(a),n({status:"FAILURE"}));try{a=JSON.parse(a),e(a)}catch(e){t(e),n({status:"FAILURE"})}})}).then(function(e){n({amount:e.totalPrice,lineItems:e.lineItem})})},onCouponCodeChange:function(e,n){let o=p.getAttribute(t,"data-couponCodeUpdate-url"),r={couponCode:e};return new Promise((e,t)=>{a.post(o,JSON.stringify(r),(a,o)=>{try{a=JSON.parse(a),e(a)}catch(e){t(e),n({status:"FAILURE"})}})}).then(function(e){"success"==e.status?n({amount:e.totalPrice,lineItems:e.lineItem}):n({error:"INVALID",errorText:"The coupon code entered seems to be invalid or expired"})})},onPaymentButtonClicked:function(e){var n=document.querySelector("#tos");if(void 0==n||n.checked||"checkoutPage"!=p.getDataAttribute(t,"data-page-type")){if("productDetailPage"==p.getDataAttribute(t,"data-page-type")||"productListingPage"==p.getDataAttribute(t,"data-page-type")){e({status:"SUCCESS"});var o=1;let n=p.querySelector(t,"#productId").value,r=document.querySelector(".product-detail-quantity-select"),l=p.getDataAttribute(t,"data-addToCartUrl",!1);void 0!=r&&(o=r.value),a.post(l,JSON.stringify({productId:n,quantity:o,type:"product"}),e=>{let t=JSON.parse(e);!1==t.success&&window.location.replace(t.url)})}else e({status:"SUCCESS"})}else{var r=p.querySelector(document,"#confirmOrderForm");return e({status:"FAILURE"}),r.submit(),!1}}}}};e.setPaymentIntent(r),e.isPaymentMethodAvailable(function(n){void 0!==t&&(n?("nn-apple-pay-button"==t.className&&void 0!==document.querySelectorAll(".nn-apple-pay-error-message")&&null!==document.querySelectorAll(".nn-apple-pay-error-message")&&document.querySelectorAll(".nn-apple-pay-error-message").forEach(function(e){e.remove()}),e.addPaymentButton("."+t.className),null!=t.querySelector("button")?t.querySelector("button").style.width="100%":null!=t.querySelector("apple-pay-button")&&(t.querySelector("apple-pay-button").style.width="100%")):"nn-apple-pay-button"==t.className&&void 0!==document.querySelectorAll(".nn-apple-pay-error-message")&&null!==document.querySelectorAll(".nn-apple-pay-error-message")&&null!=document.querySelector("input[name=paymentMethodId]:checked")&&null!=document.querySelector("input[name=paymentMethodId]:checked").closest(".payment-method")&&(document.querySelector("input[name=paymentMethodId]:checked").closest(".payment-method").style.display="none"))})}_displayErrorMsgSubs(e){let t=document.getElementsByClassName("alert alert-danger d-flex align-items-center");for(;t.length>0;)t[0].parentNode.removeChild(t[0]);var n=document.getElementById("novalnetchangePaymentForm");let a=document.createElement("div"),o=document.createElement("div"),r=document.createElement("div"),l=document.createElement("span");a.className="alert alert-danger d-flex align-items-center",o.className="alert-content-container",r.className="alert-content",l.className="icon icon-blocked",l.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24"><defs><path d="M12 24C5.3726 24 0 18.6274 0 12S5.3726 0 12 0s12 5.3726 12 12-5.3726 12-12 12zm0-2c5.5228 0 10-4.4772 10-10S17.5228 2 12 2 2 6.4772 2 12s4.4772 10 10 10zm4.2929-15.7071c.3905-.3905 1.0237-.3905 1.4142 0 .3905.3905.3905 1.0237 0 1.4142l-10 10c-.3905.3905-1.0237.3905-1.4142 0-.3905-.3905-.3905-1.0237 0-1.4142l10-10z" id="icons-default-blocked"></path></defs><use xlink:href="#icons-default-blocked" fill="#758CA3" fill-rule="evenodd"></use></svg>',a.appendChild(l),a.appendChild(o),o.appendChild(r),r.innerHTML=e,n.parentNode.insertBefore(a,n),a.scrollIntoView()}},"[data-wallet-payments]")})();